{
  "storeVersion": 1,
  "docType": "QuickTemplate",
  "docTypeVersion": 1,
  "docId": "operation-springSecuritySecurityfilterchain",
  "content": {
    "index": "spring security filter chain",
    "name": "Spring security, SecurityFilterChain",
    "templates": [
      {
        "id": "input",
        "textTemplate": "@Configuration\npublic class WebSecurityConfig {\n\n\t/**\n\t * Cette méthode est surtout intéressante parce qu'elle permet de\n\t * \"court-circuiter\" Spring Security.\n\t * \n\t * <p>\n\t * On l'utilise principalement pour désactiver les tests sur certaines URL\n\t * <em>avant</em> qu'on n'en arrive à vérifier en profondeur les choses.\n\t */\n\t@Bean\n\tpublic WebSecurityCustomizer webSecurityCustomizer() throws Exception {\n\t\treturn (WebSecurity web) -> web.ignoring()\n\t\t\t\t.requestMatchers(\"/css/**\");\n\t}\n\n\t@Bean\n\tpublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n\t\thttp\n\t\t\t\t.authorizeHttpRequests(authRequest -> {\n\t\t\t\t\t// seul un utilisateur qui n'est pas un client authentifié peut créer un client\n\t\t\t\t\tauthRequest.requestMatchers(\"/customer/create\").anonymous();\n\n\t\t\t\t\t// seul un client connecté peut mettre à jour ses données\n\t\t\t\t\tauthRequest.requestMatchers(\"/customer/updateself\").hasRole(\"CUST\");\n\n\t\t\t\t\t// seul un client connecté peut visualiser ses données\n\t\t\t\t\tauthRequest.requestMatchers(HttpMethod.GET, \"/customer/viewself\").hasRole(\"CUST\");\n\n\t\t\t\t\tauthRequest.requestMatchers(HttpMethod.GET, \"/item/view\").permitAll();\n\t\t\t\t\tauthRequest.requestMatchers(HttpMethod.GET, \"/product/view\").permitAll();\n\t\t\t\t\tauthRequest.requestMatchers(HttpMethod.GET, \"/category/view\").permitAll();\n\n\t\t\t\t\tauthRequest.requestMatchers(HttpMethod.GET, \"/login\").anonymous();\n\t\t\t\t\tauthRequest.requestMatchers(HttpMethod.GET, \"/logout\").authenticated();\n\n\t\t\t\t\t// seul un employé peut lister, visualiser ou chercher un client\n\t\t\t\t\tauthRequest.requestMatchers(\"/office/customer/**\").hasRole(\"EMP\");\n\n\t\t\t\t\t// all other requests are allowed!\n\t\t\t\t\tauthRequest.anyRequest().permitAll();\n\t\t\t\t})\n\t\t\t\t.formLogin(l -> l.loginPage(\"/login\"))\n\t\t;\n\t\treturn http.build();\n\t}\n}",
        "defaultText": null
      }
    ]
  }
}